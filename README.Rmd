---
title: "Type-2 Diabetes Treatment Pathways"
author: "Rohit Vashisht"
date: "3/23/2017"
output: html_document
---

Introduction
============
This is an R package that can be used to execute T2D study. Detail instructions on how to execute this study are provided below. 

Step-1
Install the package as follows:
```r
library("devtools")
install_github("rohit43/DiabetesTxPath")
```

Step-2
Load the required libraries as follows:

```r
library("OhdsiRTools")
library("OhdsiSharing")
library("SqlRender")
library("DatabaseConnector")
library("CohortMethod")
library("gridExtra")
library("DiabetesTxPath")
```
Step-3
Setup your JBC driver environment and connection details as follows:
```r
jdbcDrivers <- new.env()
connectionDetails <- createConnectionDetails(dbms = "yourDatabase", server = "yourServer",user = "yourUserName", password = "yourPassword",port = "yourPort")
```

Step-4
Provide database schema name and other details as follows.

```r
cdmDatabaseSchema <- "nameOfYourCdmSchema"
resultsDatabaseSchema <- "nameOfResultsSchema"
targetDatabaseSchema <- "nameOfResultsSchema"
results_path <- "path to results folder" #where you want the results to be saved.
cdmVersion <- "5" #do not change this. Please note, this study can only be executed on CDMV5
numThread <- c(numericValue) #eg. 8 for 8 threads. Give as much as you can :) 
```

Step-5
This study can be executed for four different outcomes a) HbA1c b)Myocardial Infraction c)Kideny Disorders and d)Eyes related Disorders. The instructions therefore can be provided accordingly. For example, the runStudy() function can be used as follows to execute the study for HbA1c as outcome.

```r
runStudy(connectionDetails = connectionDetails,
         cdmDatabaseSchema = cdmDatabaseSchema, 
         resultsDatabaseSchema = resultsDatabaseSchema, 
         cdmVersion = cdmVersion, 
         outComeId = 3, 
         outComeName = "HbA1c")
```

Step-6
The results can be packaged once the study is complete as follows:

```r
packageResults(connectionDetails = connectionDetails, 
               cdmDatabaseSchema = cdmDatabaseSchema, 
               workFolder = results_path, 
               dbName = cdmDatabaseSchema)
```

Time of execution can vary from few hours to day or two, depending on the size of the dataset you have. 

